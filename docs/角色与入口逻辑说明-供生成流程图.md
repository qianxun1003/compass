# 角色、入口与账号逻辑说明（供生成流程图/动图用）

本文档完整描述：学生、班主任、管理员三种角色，学生端入口与管理端入口两条入口，以及「通用学生账号」的关系与走向。便于据此生成 HTML 动图/流程图。

---

## 一、三个角色

| 角色 | 说明 | 在系统中的身份标识 |
|------|------|---------------------|
| **学生** | 使用选校、出愿计划、时间轴等学生端功能的用户 | 账号的 role = 学生（user） |
| **班主任** | 可管理自己的学生、发提醒、生成学生账号；可进入学生端使用选校等功能 | 账号的 role = 班主任（teacher） |
| **管理员** | 最高权限：用户管理、添加班主任、改角色等；也可进入学生端使用选校等功能 | 账号的 role = 管理员（admin / super_admin） |

---

## 二、两个入口（用户最先打开的页面）

| 入口名称 | 典型网址示例 | 谁会用 | 登录后进入哪里 |
|----------|--------------|--------|----------------|
| **学生端入口** | 首页 `/`、登录页 `/login.html`、注册页 `/register.html` | 学生、以及「先注册再被改成班主任/管理员」的老师 | 学生端（首页、出愿中心、条件检索等） |
| **管理端入口** | 管理后台登录页 `/admin/login.html` | 已拥有班主任/管理员账号的老师（你直接发账号给他们） | 管理后台（班主任后台或管理后台） |

---

## 三、两种「学生端身份」

进入学生端时，可能以两种身份之一存在：

| 身份 | 说明 | 何时出现 |
|------|------|----------|
| **个人学生账号** | 每个用户自己的账号（用户名各异，如 张三、李四、千寻测试账号）。role 可以是学生，也可以是班主任或管理员（若从学生端登录则显示为学生端界面，但带「前往管理后台」按钮）。 | 用户从**学生端入口**登录（或注册后登录）时 |
| **通用学生账号** | 唯一一个共用账号，用户名固定为 `staff_preview`。所有班主任/管理员从**管理后台**点击「去学生端」时，都统一以这个账号进入学生端。 | 仅当用户**已在管理后台**，再点击「去学生端」或「条件检索/快速检索/成绩匹配」时 |

重要：**从管理后台 → 学生端** 的终点只有一个，就是「通用学生账号」；**从学生端入口登录** 的终点是「个人账号」（可能是学生，也可能是班主任/管理员）。

---

## 四、方向与多对一 / 一对多

### 4.1 从「管理后台」到「学生端」

- **方向**：管理后台 → 学生端  
- **关系**：**多对一**  
  - 「多」：多个班主任、多个管理员（多人）  
  - 「一」：唯一一个终点——**通用学生账号**（staff_preview）  
- **路径**：在管理后台点击「去学生端」或学生详情里的「条件检索 / 快速检索 / 成绩匹配」→ 系统用通用学生账号登录 → 跳转到学生端对应页面。  
- **没有**：从管理后台「以自己个人学生账号」进学生端的路径（该路径已关闭）。

### 4.2 从「学生端」到「管理后台」

- **方向**：学生端 → 管理后台  
- **关系**：**一对多**（从「谁能看到入口」的角度）  
  - 「一」：同一个入口——学生端页面上显示的「前往班主任/管理后台」按钮（或链接）  
  - 「多」：多个角色可以使用——所有**已经是班主任或管理员**的账号（只要他们从学生端入口登录，并刷新/重登以拿到最新角色）  
- **路径**：用户从**学生端入口**登录（个人账号，且该账号已被设为班主任或管理员）→ 学生端显示「前往班主任/管理后台」→ 点击后跳到管理后台登录页 → 用同一账号密码登录 → 进入管理后台。

### 4.3 从「学生端入口」进入学生端（个人账号）

- **方向**：学生端入口（登录/注册）→ 学生端  
- **关系**：**一对一**（每个账号对应自己的一个身份）  
  - 每个用户用**自己的账号**登录（或注册后登录），进入学生端时看到的是**自己的**个人学生端身份（自己的出愿计划、自己的筛选结果等）。  
  - 若该账号后来被改为班主任/管理员，刷新后学生端会多出「前往管理后台」按钮，但仍是**同一个个人账号**。

### 4.4 从「管理端入口」进入管理后台

- **方向**：管理端入口（admin/login.html）→ 管理后台  
- **关系**：**多对多**（多个老师/管理员，多个账号，各自登录进管理后台）  
  - 每个班主任/管理员用**自己的**管理员/班主任账号登录 → 进入管理后台（管理员看到「管理后台」，班主任看到「班主任后台」）。  
  - 之后他们若点「去学生端」，则**全部**汇聚到**同一个**通用学生账号。

---

## 五、完整流程归纳（便于画图）

### 流程 A：学生

1. 打开**学生端入口**（首页/登录/注册）。  
2. 注册或登录 → 使用**个人学生账号**。  
3. 始终停留在学生端，使用选校、出愿、时间轴等。  
4. **不会**看到「前往管理后台」按钮（因为 role = 学生）。

### 流程 B：老师先注册学生账号，再被设为班主任/管理员

1. 打开**学生端入口**，**注册**新账号 → 此时为**学生**。  
2. 管理员在**管理后台**把该账号改为「班主任」或「管理员」。  
3. 该老师回到学生端**刷新**（或重新登录）→ 学生端根据最新 role 显示「**前往班主任/管理后台**」按钮。  
4. 点击该按钮 → 跳转到**管理后台登录页** → 用**同一账号密码**登录 → 进入**管理后台**。  
5. 在管理后台点击「**去学生端**」→ 系统以**通用学生账号**登录并跳转 → 该老师进入学生端时已是**通用学生账号**，不是自己的个人学生账号。

### 流程 C：老师直接拿到管理员/班主任账号

1. 管理员在**管理后台**为老师**生成**班主任/管理员账号（用户名+密码），并告知老师。  
2. 老师打开**管理端入口**（admin/login.html），输入该账号密码 → **直接进入管理后台**（不经过学生端）。  
3. 在管理后台点击「**去学生端**」→ 系统以**通用学生账号**登录并跳转 → 进入学生端时是**通用学生账号**。

### 流程 D：班主任/管理员从学生端「返回」管理后台

1. 已是班主任/管理员的用户，从**学生端入口**登录（个人账号）。  
2. 学生端显示「前往班主任/管理后台」→ 点击 → 跳到管理后台登录页 → 登录后进入管理后台。  
3. 再点「去学生端」→ 再次进入**通用学生账号**。

---

## 六、关键汇总表（适合做图例）

| 起点 | 终点 | 关系 | 说明 |
|------|------|------|------|
| 学生端入口（登录/注册） | 学生端（个人账号） | 一对一 | 每个账号对应自己的学生端身份 |
| 管理后台（点击「去学生端」等） | 学生端（通用学生账号） | **多对一** | 所有班主任/管理员 → 同一个 staff_preview |
| 学生端（「前往管理后台」按钮） | 管理后台登录页 → 管理后台 | **一对多** | 所有班主任/管理员账号都可使用该入口 |
| 管理端入口（admin/login.html） | 管理后台 | 多对多 | 多个班主任/管理员账号各自登录 |

---

## 七、名词与页面对应（便于标注在图上）

- **学生端入口**：首页、学生登录页、学生注册页。  
- **学生端**：首页、出愿中心、条件检索、快速检索、成绩匹配等页面（需学生端登录）。  
- **管理端入口**：管理后台登录页（admin/login.html）。  
- **管理后台**：班主任后台 / 管理后台（admin/index.html），内含「去学生端」等链接。  
- **个人学生账号**：每个用户自己的账号，从学生端入口登录后使用。  
- **通用学生账号**：唯一共用账号 staff_preview，仅从管理后台「去学生端」时使用。

---

## 八、给动图/流程图的建议

1. **用两种颜色或形状**区分「学生端」与「管理端」（例如学生端一组框、管理端一组框）。  
2. **用箭头方向**区分：学生端 ↔ 管理端、管理端 → 通用学生账号。  
3. **标注多对一**：多条箭头从「多个班主任/管理员」汇聚到「一个通用学生账号」。  
4. **标注一对多**：「前往管理后台」一条入口，指向「多个班主任/管理员均可使用」。  
5. **可画两条「主路径」**：  
   - 路径 1：学生端入口 → 个人学生账号（学生）；或 个人学生账号（班主任/管理员）→ 管理后台 → 通用学生账号。  
   - 路径 2：管理端入口 → 管理后台 → 通用学生账号。  

若需要，可把本文档整段发给另一 AI，说明：「请根据这份说明生成一个 HTML 动图/流程图，展示角色、入口、个人学生账号与通用学生账号的关系与走向。」
