# 数据需求对比分析

## 📊 一、数据对比表

| 序号 | 数据需求 | 当前系统 | 状态 | 字段名 | 说明 |
|------|---------|---------|------|--------|------|
| **基础信息** |
| 1 | 学部及学科分类（文/理/文理皆可） | ✅ 有 | 完整 | `bunri`（文理）、`department`（学部）、`major`（学科） | 已有完整分类 |
| 2 | 不同学部的地理位置 | ✅ 有 | 完整 | `region`（位置） | 已有地理位置信息 |
| **报考信息** |
| 3 | 大学报考属于前期还是后期？ | ✅ 有 | 完整 | `period`（第几期） | 已有期数信息 |
| 4 | 大学选考的方式？ | ✅ 有 | 完整 | `selectionMethod`（方式） | 已有选考方式 |
| 5 | 可否并愿？ | ✅ 有 | 完整 | `combined`（併願） | 已有并愿信息 |
| **校内考信息** |
| 6 | 校内考的有无？ | ✅ 有 | 部分 | `examFormat`（校内考形式） | 可通过"纯书类"判断有无 |
| 7 | 一次选考？二次选考？ | ✅ 有 | 部分 | `examDate`（校内考时间1）、`examDate2`（校内考时间2） | 有时间，但未明确标注"一次/二次" |
| 8 | 校内考对应的时间 | ✅ 有 | 完整 | `examDate`、`examDate2` | 已有时间信息 |
| 9 | 校内考要考什么？考试的形式？ | ✅ 有 | 完整 | `examFormat`（校内考形式） | 已有考试形式描述 |
| **出愿时间** |
| 10 | 出愿开始时间 | ✅ 有 | 完整 | `mailStart`（网上出愿开始时间） | 已有 |
| 11 | 出愿结束时间 | ✅ 有 | 完整 | `mailEnd`（网上出愿截止时间） | 已有 |
| 12 | 邮寄开始时间 | ✅ 有 | 完整 | `mailStartDate`（邮寄开始时间） | 已有 |
| 13 | 邮寄截止时间 | ✅ 有 | 完整 | `mailEndDate`（邮寄截止时间） | 已有 |
| 14 | 必着/消印 | ✅ 有 | 完整 | `mailEndNote`（必着/消印） | 已有 |
| **出愿材料** |
| 15 | 出愿材料清单 | ❌ 没有 | 缺失 | - | 需要新增字段 |
| 16 | 推荐信需要吗？ | ❌ 没有 | 缺失 | - | 需要新增字段 |
| 17 | 出愿流程 | ❌ 没有 | 缺失 | - | 需要新增字段 |
| **成绩要求** |
| 18 | EJU需要的科目 | ✅ 有 | 完整 | `ejuSubjects`（需要EJU科目） | 已有科目列表 |
| 19 | EJU科目推荐分数 | ⚠️ 部分 | 部分 | `specialRequirements`（特殊成绩要求） | 只有硬性要求，没有推荐分数 |
| 20 | 能使用的EJU时间期限 | ✅ 有 | 完整 | `ejuPeriod`（能使用EJU） | 已有时间期限 |
| 21 | 英语成绩类型（托福/托业/雅思） | ❌ 没有 | 缺失 | `english`只有"要/不要" | 需要新增字段：英语成绩类型 |
| 22 | 英语成绩推荐分数 | ❌ 没有 | 缺失 | - | 需要新增字段 |
| 23 | JLPT等级要求 | ❌ 没有 | 缺失 | `jlpt`只有"要/不要" | 需要新增字段：JLPT等级 |
| 24 | JLPT分数要求 | ❌ 没有 | 缺失 | - | 需要新增字段 |
| 25 | 成绩的特殊要求（哪些科目更重要、哪些不需要等） | ⚠️ 部分 | 部分 | `specialRequirements` | 有特殊要求字段，但可能需要更详细的结构 |
| **合格情况** |
| 26 | 往年的合格情况（报录比） | ❌ 没有 | 缺失 | - | 需要新增字段 |
| 27 | 合格人的成绩情况 | ⚠️ 部分 | 部分 | `合格实绩.xlsx` | 有原始数据，但未整合到主数据表 |

---

## ✅ 二、已有数据（18项）

### 完整数据（15项）
1. ✅ 学部及学科分类
2. ✅ 地理位置
3. ✅ 报考期数（前期/后期）
4. ✅ 选考方式
5. ✅ 可否并愿
6. ✅ 校内考形式
7. ✅ 校内考时间（一次、二次）
8. ✅ 出愿开始/结束时间
9. ✅ 邮寄开始/截止时间
10. ✅ 必着/消印
11. ✅ EJU需要的科目
12. ✅ EJU时间期限
13. ✅ 英语要求（要/不要）
14. ✅ JLPT要求（要/不要）
15. ✅ 发榜时间

### 部分数据（3项）
16. ⚠️ 校内考一次/二次标注（有时间但未明确标注）
17. ⚠️ 成绩推荐分数（只有硬性要求，没有推荐分数）
18. ⚠️ 合格人成绩（有原始数据但未整合）

---

## ❌ 三、缺失数据（9项）

### 出愿材料相关（3项）
1. ❌ **出愿材料清单**
   - 需要字段：`applicationMaterials`（出愿材料）
   - 格式：文本或列表，如："入学志愿书、成绩证明书、毕业证明书、推荐信、研究计划书"

2. ❌ **推荐信要求**
   - 需要字段：`recommendationLetter`（推荐信）
   - 格式：枚举值，如："需要"、"不需要"、"可选"、"需要2封"

3. ❌ **出愿流程**
   - 需要字段：`applicationProcess`（出愿流程）
   - 格式：文本或结构化数据，描述出愿步骤

### 成绩要求详细化（5项）
4. ❌ **英语成绩类型**
   - 当前：`english` 只有 "要/不要"
   - 需要：`englishType`（英语成绩类型）
   - 格式：枚举值，如："TOEFL"、"TOEIC"、"IELTS"、"TOEFL或TOEIC"、"不需要"

5. ❌ **英语成绩推荐分数**
   - 需要字段：`englishScoreRecommend`（英语成绩推荐分数）
   - 格式：数字或范围，如："80"、"80-100"、"TOEFL 80以上"

6. ❌ **JLPT等级要求**
   - 当前：`jlpt` 只有 "要/不要"
   - 需要：`jlptLevel`（JLPT等级）
   - 格式：枚举值，如："N1"、"N2"、"N1或N2"、"不需要"

7. ❌ **JLPT分数要求**
   - 需要字段：`jlptScoreRequire`（JLPT分数要求）
   - 格式：数字或范围，如："100以上"、"120-180"

8. ❌ **EJU科目推荐分数**
   - 当前：`specialRequirements` 只有硬性要求
   - 需要：`ejuScoreRecommend`（EJU推荐分数）
   - 格式：结构化数据，如：`{"日语": "350-400", "数学1": "150-180", "综合": "160-200"}`

### 合格情况（1项）
9. ❌ **往年合格情况（报录比）**
   - 需要字段：`admissionStats`（合格统计）
   - 格式：结构化数据，如：`{"year": 2024, "applicants": 100, "admitted": 20, "ratio": 0.2}`

---

## 📝 四、建议的数据结构扩展

### 新增字段建议

```json
{
  "name": "東京大学",
  "department": "理科一類",
  // ... 现有字段 ...
  
  // 新增字段
  "applicationMaterials": [
    "入学志愿书",
    "成绩证明书",
    "毕业证明书",
    "推荐信（2封）",
    "研究计划书",
    "EJU成绩单",
    "英语成绩单（TOEFL）"
  ],
  "recommendationLetter": "需要2封",
  "applicationProcess": "1. 网上出愿 2. 邮寄材料 3. 校内考 4. 面试",
  
  "englishType": "TOEFL",
  "englishScoreRecommend": "80以上",
  "jlptLevel": "不需要",
  "jlptScoreRequire": null,
  
  "ejuScoreRecommend": {
    "日语": "350-400",
    "数学2": "180-200",
    "物理": "85-100",
    "化学": "85-100"
  },
  
  "admissionStats": [
    {
      "year": 2024,
      "applicants": 150,
      "admitted": 30,
      "ratio": 0.2,
      "source": "官网公开数据"
    },
    {
      "year": 2023,
      "applicants": 140,
      "admitted": 28,
      "ratio": 0.2
    }
  ],
  
  "examStages": {
    "firstStage": {
      "name": "一次选考",
      "date": "2026-02-25",
      "format": "小论文"
    },
    "secondStage": {
      "name": "二次选考",
      "date": "2026-03-04",
      "format": "面试（线下）"
    }
  }
}
```

---

## 🎯 五、爬取优先级建议

### 高优先级（必须爬取）
1. ✅ **英语成绩类型**（TOEFL/TOEIC/IELTS）- 影响成绩匹配
2. ✅ **JLPT等级要求**（N1/N2）- 影响成绩匹配
3. ✅ **EJU科目推荐分数** - 影响成绩匹配和计算模型
4. ✅ **出愿材料清单** - 用户需要的重要信息
5. ✅ **推荐信要求** - 用户需要的重要信息

### 中优先级（建议爬取）
6. ⚠️ **英语成绩推荐分数** - 补充信息
7. ⚠️ **JLPT分数要求** - 补充信息
8. ⚠️ **出愿流程** - 用户需要的信息
9. ⚠️ **校内考一次/二次明确标注** - 优化现有数据

### 低优先级（可选爬取）
10. ⚠️ **往年合格情况（报录比）** - 如果官网公开
11. ⚠️ **合格人成绩详情** - 如果官网公开（已有原始数据，可整合）

---

## 🔧 六、实施建议

### 阶段1：扩展数据结构
1. 在Excel中添加新列
2. 更新 `export_school_data.py` 的 `COLUMN_MAP`
3. 更新前端显示逻辑

### 阶段2：爬取缺失数据
1. 优先爬取高优先级数据
2. 逐步补充中低优先级数据
3. 数据验证和清洗

### 阶段3：数据整合
1. 整合合格实绩数据到主表
2. 建立数据关联
3. 更新计算模型

---

## 📋 七、Excel列扩展建议

### 建议新增列（按优先级）

**高优先级**：
- `英语成绩类型` → `englishType`
- `英语成绩推荐分数` → `englishScoreRecommend`
- `JLPT等级` → `jlptLevel`
- `JLPT分数要求` → `jlptScoreRequire`
- `EJU推荐分数` → `ejuScoreRecommend`
- `出愿材料` → `applicationMaterials`
- `推荐信要求` → `recommendationLetter`

**中优先级**：
- `出愿流程` → `applicationProcess`
- `一次选考名称` → `firstExamName`
- `二次选考名称` → `secondExamName`

**低优先级**：
- `报录比（2024）` → `admissionRatio2024`
- `报录比（2023）` → `admissionRatio2023`
- `合格人数（2024）` → `admitted2024`
- `报考人数（2024）` → `applicants2024`

---

## 💡 八、下一步行动

1. **确认需求**：确认以上分析是否符合您的需求
2. **扩展数据结构**：添加新字段到Excel和代码
3. **编写爬虫**：针对缺失数据编写爬虫
4. **数据验证**：确保数据质量和完整性

您觉得这个分析如何？需要我立即开始实现吗？
