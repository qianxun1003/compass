# 第一步行动方案

## 📊 当前状况分析

### 数据现状
- ✅ **已有数据量**：约3000条学校/学部记录
- ⚠️ **期数分类混乱**：发现"只有一期"、"前期 A方式"等多种表述
- ⚠️ **选考方式不统一**：主要是"外国人入試"，但可能有其他变体
- ⚠️ **校内考信息**：有基础数据但可能不完整
- ⚠️ **EJU科目**：有数据但需要验证准确性

### 系统架构
- ✅ Excel作为数据源（`学部学校一览表.xlsx`）
- ✅ Python脚本导出JSON（`export_school_data.py`）
- ✅ 前端读取JSON显示
- ✅ 有合格实绩分析系统（`analyze_admission_scores.py`）

---

## 🎯 第一步：数据标准化（最重要，必须先做）

### 为什么先做标准化？

**核心原因**：
1. **数据混乱影响后续所有工作**：如果分类不统一，后续爬取、验证、计算模型都会受影响
2. **必须先建立标准**：只有建立了标准分类体系，才能判断哪些数据需要修正
3. **为爬取做准备**：爬取前需要知道"标准答案"是什么，才能正确映射

### 第一步具体任务：**分析现有数据，建立标准分类体系**

---

## 📋 第一步详细计划

### 任务1.1：分析现有期数分类（第1-2天）

**目标**：统计所有不同的期数表述，建立标准分类

**步骤**：
1. **提取所有期数数据**
   ```python
   # 从学校总览.csv中提取所有"第几期"列的唯一值
   # 统计每种表述出现的次数
   ```

2. **分析归纳**
   - 列出所有不同的表述
   - 识别同义词（如"只有一期"和"単独選抜"）
   - 识别变体（如"前期 A方式"和"前期"）

3. **建立初步标准分类**
   - 确定互斥的分类
   - 确保覆盖全面
   - 编写分类说明

**产出**：
- `docs/期数分类标准.md`（标准分类体系文档）
- `scripts/analyze_period_data.py`（分析脚本）
- 期数数据统计报告

### 任务1.2：分析现有选考方式分类（第2-3天）

**步骤**：同任务1.1

**产出**：
- `docs/选考方式分类标准.md`
- `scripts/analyze_selection_method_data.py`
- 选考方式数据统计报告

### 任务1.3：建立映射表（第3-4天）

**目标**：将现有数据映射到标准分类

**步骤**：
1. **编写映射脚本**
   ```python
   # 读取Excel
   # 根据映射表更新"第几期"和"方式"列
   # 生成更新后的Excel
   ```

2. **数据验证**
   - 检查映射是否正确
   - 识别无法自动映射的数据（需要人工审核）
   - 生成验证报告

**产出**：
- `scripts/map_to_standard_classification.py`（映射脚本）
- `standardization/period_mapping.json`（映射表）
- `standardization/selection_method_mapping.json`（映射表）
- 更新后的Excel数据（备份原文件）

---

## 🛠️ 立即开始：编写分析脚本

### 脚本1：分析期数分类

**功能**：
- 读取`学校总览.csv`
- 统计所有"第几期"的唯一值
- 统计每种表述的出现次数
- 生成统计报告

**输出**：
- 所有不同的期数表述列表
- 每种表述的出现次数
- 建议的标准分类

### 脚本2：分析选考方式分类

**功能**：同脚本1，但针对"方式"列

---

## 📊 预期结果

### 期数分类标准（示例）

基于现有数据，可能的标准分类：
```
1. 只有一期（単独選抜）
2. 前期（前期選抜）
3. 后期（後期選抜）
4. 前期+后期（前期・後期選抜）
5. 前期 A方式（需要确认是否等同于"前期"）
6. 前期 B方式（需要确认是否等同于"前期"）
7. 其他（需要根据分析结果补充）
```

### 选考方式标准（示例）

```
1. 外国人入試（外国人特别选拔）
2. 一般入試（一般选拔）
3. 推薦入試（推荐入学）
4. AO入試（AO入学）
5. その他（其他）
```

---

## ⏱️ 时间估算

- **任务1.1**：1-2天（分析期数分类）
- **任务1.2**：1-2天（分析选考方式分类）
- **任务1.3**：1-2天（建立映射表和更新数据）

**总计**：3-6天

---

## ✅ 成功标准

完成第一步后，应该达到：
1. ✅ 有明确的标准分类体系文档
2. ✅ 有数据映射表（旧表述 → 标准分类）
3. ✅ 现有数据已映射到标准分类
4. ✅ 有数据验证报告（哪些数据需要人工审核）

---

## 🚀 立即行动

### 我现在可以帮您：

1. **编写分析脚本**
   - `scripts/analyze_period_data.py`（分析期数分类）
   - `scripts/analyze_selection_method_data.py`（分析选考方式分类）

2. **运行分析**
   - 分析现有数据
   - 生成统计报告

3. **建立标准分类体系**
   - 基于分析结果建立标准
   - 编写分类说明文档

4. **建立映射表**
   - 编写映射脚本
   - 更新Excel数据

**您希望我现在就开始编写分析脚本吗？**

建议顺序：
1. 先编写分析脚本 → 运行分析 → 查看结果
2. 基于分析结果建立标准分类
3. 建立映射表并更新数据

这样我们就能在开始爬取之前，先确保现有数据的标准化。
